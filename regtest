# vim:ts=4:sw=4:
#
#	Interactive BASIC Compiler Project
#	File: regtest - MSYS/bash script to run all tests
#	Copyright (C) 2010  Thunder422
#
#	This program is free software: you can redistribute it and/or modify
#	it under the terms of the GNU General Public License as published by
#	the Free Software Foundation, either version 3 of the License, or
#	(at your option) any later version.
#
#	This program is distributed in the hope that it will be useful,
#	but WITHOUT ANY WARRANTY; without even the implied warranty of
#	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#	GNU General Public License for more details.
#
#	For a copy of the GNU General Public License,
#	see <http://www.gnu.org/licenses/>.
# 
#
#  Change History:
#
#  2010-05-29  initial release
#  2010-06-10  added translator tests 10 and 11
#  2010-06-29  added translator test 12
#  2010-07-04  added translator test 13
#  2011-01-04  added translator test 14
#  2011-01-09  changed name of executable from ibcp to ibcp.exe to make
#              it work properly on Linux (this still works under windows;
#              before the .exe was being added automatically)
#  2011-02-05  added translator test 15
#  2011-03-20  added translator test 16
#  2011-03-27  added translator test 17
#
#
#  Usage:
#    regtest
#
#  Details:
#    output files are directed to current (IBCP) directory, and then
#    comparing to the established output files in the test directory
#    reporting any changes as FAIL
#

rm -f parser*.txt translator*.txt
for i in 1 2 3 4 5
do
	ibcp.exe -p $i >parser$i.txt
	cmp -s test/parser$i.txt parser$i.txt
	if [ $? -eq 0 ]
	then
		echo Parser Test $i... OK
	else
		echo Parser Test $i... FAIL
	fi
done

for i in 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17
do
	ibcp.exe -t $i >translator$i.txt
	cmp -s test/translator$i.txt translator$i.txt
	if [ $? -eq 0 ]
	then
		echo Translator Test $i... OK
	else
		echo Translator Test $i... FAIL
	fi
done
